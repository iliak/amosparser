import struct

def readLabel(stream):
    pad, length, flags = struct.unpack("HBB", stream.read(4))
    string = struct.unpack('{}s'.format(length), stream.read(length))[0]\

    string = string.decode("ascii")

    if flags & 1 == 1:
        return "#" + string
    elif flags & 2 == 1:
        return "$" + string

    return string


def readValue(stream):
    value = struct.unpack(">i", stream.read(4))[0]
    return str(value)


def readString(stream):

    length = struct.unpack(">H", stream.read(2))[0]

    # round to next word
    length += length % 2

    string = struct.unpack('{}s'.format(length), stream.read(length))[0]
    return '"' + string.decode("ascii") + '"'


def readFloat(stream):

    pass


def readExtension(stream):
    number, pad, id = struct.unpack(">BBH", stream.read(4))

    if not extensions[number]:
        return "Uninstalled extension #" % number

    extension = known_extensions[extensions[number]]
    if not extension:
        return "Extension {} unknown" % extensions[number]



    # return "Ext #{}:{} not found !".format(number, id)


    return extension["tokens"][id]


def readComment(stream):
    stream.read(1)

    length = struct.unpack("B", stream.read(1))[0]
    string = struct.unpack('{}s'.format(length), stream.read(length))[0].decode("ascii")

    # Padding
    stream.read(1)

    if stream.tell() % 2 == 1:
        stream.read(1)

    return string + "\n"


def readProcedure(stream):

    end = struct.unpack(">I", stream.read(4))[0]
    seed = struct.unpack(">H", stream.read(2))[0]
    flags = struct.unpack("B", stream.read(1))[0]
    stream.read(1)

    if flags & 2 ** 4:
        print("[Procedure compiled !!]")
        stream.read(end)

    return "Procedure "


def readPad(size):

    def pad(stream):
        stream.read(size)
        return ""

    return pad

# AMOS and AMOS PRO base token
tokens = {
    0x0000: "\n",
    0x0006: ("", readLabel),      # Variable name
    0x000c: ("", readLabel),      # Label name
    0x0012: ("", readLabel),      # Call
    0x0018: ("", readLabel),      # Goto Label ref
    0x001e: ("", readValue),      # Binary value
    0x0026: ("", readString),     # Double quote string
    0x002e: ("", readString),     # String with single quote
    0x0036: ("", readValue),      # Hexa decimal variable
    0x003e: ("", readValue),      # Variable declaration
    0x0046: ("", readFloat),      # Float variable
    0x004e: ("", readExtension),  # Extension
    0x0054: " : ",
    0x005C: ", ",
    0x0064: ",",
    0x006C: "#",
    0x0074: "(",
    0x007c: ") ",
    0x0084: " [",
    0x008C: "] ",
    0x0094: " To ",
    0x009C: " Not ",
    0x00a6: "Swap ",
    0x00b0: "Def Fn ",
    0x00bc: "Fn ",
    0x00c4: "Follow Off ",
    0x00d4: "Follow ",
    0x00e0: "Resume Next ",
    0x00f2: "Inkey$ ",
    0x00fe: "Repeat$ ",
    0x010e: "Zone$ ",
    0x011c: "Border$ ",
    0x012c: "Double Buffer",
    0x0140: "Start ",
    0x014c: "Length ",
    0x015a: "Doke ",
    0x0168: "On Menu Del ",
    0x017a: "On Menu On ",
    0x018a: "On Menu Off ",
    0x019c: "Every On ",
    0x01aa: "Every Off ",
    0x01ba: "LogBase ",
    0x01c8: "Logic ",
    0x01d4: "Logic ",
    0x01dc: "Asc ",
    0x01e6: "As ",
    0x01ee: "Call ",
    0x01f8: "ExeCall ",
    0x0206: "GfxCall ",
    0x0213: "DosCall ",
    0x0222: "IntCall ",
    0x0230: "Freeze ",
    0x023c: ("For ", readPad(2)),
    0x0246: "Next ",
    0x0250: ("Repeat ", readPad(2)),
    0x025c: "Until ",
    0x0268: ("While ", readPad(2)),
    0x0274: "Wend",
    0x027e: ("Do ", readPad(2)),
    0x0286: "Loop",
    0x0290: ("Exit If ", readPad(4)),
    0x029e: ("Exit ", readPad(4)),
    0x02a8: "Goto ",
    0x02b2: "Gosub ",
    0x02be: ("If ", readPad(2)),
    0x02c6: " Then ",
    0x02d0: ("Else ", readPad(2)),
    0x02da: "End If",
    0x02e6: "On Error ",
    0x02f4: "On Break Proc ",
    0x0308: "On Menu ",
    0x0316: ("On ", readPad(4)),
    0x031e: "Resume Label ",
    0x0330: "Resume ",
    0x033c: "Pop Proc ",
    0x034a: "Every ",
    0x0356: " Step ",
    0x0360: "Return",
    0x036c: "Pop ",
    0x0376: ("", readProcedure),          # Procedure
    0x0386: "Proc",
    0x0390: "End Proc ",
    0x039e: "Shared ",
    0x03aa: "Global ",
    0x03b6: "End ",
    0x03c0: "Stop ",
    0x03ca: "Param# ",
    0x03d6: "Param$ ",
    0x03e2: "Param ",
    0x03ee: "Error ",
    0x03fa: "Errn ",
    0x0404: ("Data ", readPad(2)),
    0x040e: "Read ",
    0x0418: "Restore ",
    0x0426: "Break Off ",
    0x0436: "Break On ",
    0x0444: "Inc ",
    0x044e: "Dec ",
    0x0458: "Add ",
    0x0462: "Add ",
    0x046a: "Print #",
    0x0476: "Print ",
    0x0482: "Lprint ",
    0x048e: "Input$ ",
    0x049c: "Input$ ",
    0x04a6: "Using ",
    0x04b2: "Input #",
    0x04be: "Line Input #",
    0x04d0: "Input ",
    0x04dc: "Line Input ",
    0x04ec: "Run ",
    0x04f6: "Run ",
    0x04fe: "Set Buffer ",
    0x050e: "Mid$ ",
    0x051e: "Mid$ ",
    0x0528: "Left$ ",
    0x0536: "Right$ ",
    0x0546: "Flip$ ",
    0x0552: "Chr$ ",
    0x055e: "Space$ ",
    0x056c: "String$ ",
    0x057c: "Upper$ ",
    0x058a: "Lower$ ",
    0x0598: "Str$",
    0x05a4: "Val",
    0x05ae: "Bin$",
    0x05ba: "Bin$",
    0x05c4: "Hex$",
    0x05d0: "Hex$",
    0x05da: "Len",
    0x05e4: "Instr$",
    0x05f4: "Instr$",
    0x0600: "Tab$",
    0x060a: "Free",
    0x0614: "Varptr",
    0x0620: "Remember X",
    0x0630: "Remember Y",
    0x0640: "Dim ",
    0x064A: ("REM ", readComment),
    0x0652: ("'", readComment),
    0x0658: "Sort",
    0x0662: "Match",
    0x0670: "Edit",
    0x067a: "Direct",
    0x0686: "Rnd",
    0x0690: "Randomize ",
    0x06a0: "Sgn",
    0x06aa: "Abs",
    0x06b4: "Int",
    0x06be: "Radian",
    0x06ca: "Degree",
    0x06d6: "Pi#",
    0x06e0: "Fix",
    0x06ea: "Min",
    0x06f6: "Max",
    0x0702: "Sin",
    0x070c: "Cos",
    0x0716: "Tan",
    0x0720: "Asin",
    0x072c: "Acos",
    0x0738: "Atan",
    0x0744: "Hsin",
    0x0750: "Hcos",
    0x075c: "Htan",
    0x0768: "Sqrt",
    0x0772: "Log",
    0x077c: "Ln",
    0x0786: "Exp",
    0x0790: "Menu To Bank",
    0x07a4: "Bank To Menu",
    0x07b8: "Menu On",
    0x07c6: "Menu Off",
    0x07d4: "Menu Calc",
    0x07e4: "Menu Mouse On",
    0x07f8: "Menu Mouse Off",
    0x080c: "Menu Base",
    0x081e: "Set Menu",
    0x0832: "X Menu",
    0x0840: "Y Menu",
    0x084e: "Menu Key",
    0x0862: "Menu Bar",
    0x0872: "Menu Line",
    0x0882: "Menu Tline",
    0x0894: "Menu Movable",
    0x08a8: "Menu Static",
    0x08ba: "Menu Item Movable",
    0x08d2: "Menu Item Static",
    0x08ea: "Menu Active",
    0x08fc: "Menu Inactive",
    0x0910: "Menu Separate",
    0x0924: "Menu Link",
    0x0934: "Menu Called",
    0x0946: "Menu Once",
    0x0956: "Menu Del",
    0x0964: "Menu$",
    0x0970: "Choice",
    0x097e: "Choice",
    0x0986: "Screen Copy ",
    0x099c: "Screen Copy ",
    0x09a8: "Screen Copy ",
    0x09be: "Screen Copy ",
    0x09d6: "Screen Clone ",
    0x09ea: "Screen Open ",
    0x0a04: "Screen Close ",
    0x0a18: "Screen Display ",
    0x0a36: "Screen Offset ",
    0x0a4e: "Screen Size ",
    0x0a5e: "Screen Colour",
    0x0a72: "Screen To Front ",
    0x0a88: "Screen To Front ",
    0x0a90: "Screen To Back ",
    0x0aa6: "Screen To Back ",
    0x0aae: "Screen Hide ",
    0x0ac0: "Screen Hide ",
    0x0ac8: "Screen Show ",
    0x0ada: "Screen Show ",
    0x0ae2: "Screen Swap ",
    0x0af4: "Screen Swap ",
    0x0afc: "Save If ",
    0x0b0c: "Save Iff ",
    0x0b16: "View ",
    0x0b20: "Auto View Off ",
    0x0b34: "Auto View On ",
    0x0b46: "Screen Base",
    0x0b58: "Screen Width",
    0x0b6c: "Screen Width",
    0x0b74: "Screen Height",
    0x0b88: "Screen Height",
    0x0b90: "Get Palette",
    0x0ba4: "Get Palette",
    0x0bae: "Cls ",
    0x0bb8: "Cls ",
    0x0bc0: "Cls ",
    0x0bd0: "Def Scroll",
    0x0bee: "X Hard",
    0x0bfc: "X Hard",
    0x0c06: "Y Hard",
    0x0c14: "Y Hard",
    0x0c1e: "X Screen",
    0x0c2e: "X Screen",
    0x0c38: "Y Screen",
    0x0c48: "Y Screen",
    0x0c52: "X Text",
    0x0c60: "Y Text",
    0x0c6e: "Screen ",
    0x0c7c: "Screen ",
    0x0c84: "Hires",
    0x0c90: "Lowres",
    0x0c9c: "Dual Playfield",
    0x0cb4: "Dual Priority",
    0x0cca: "Wait Vbl",
    0x0cd8: "Default Palette",
    0x0cee: "Default",
    0x0cfc: "Palette",
    0x0d0a: "Colour Back",
    0x0d1c: "Colour ",
    0x0d2c: "Colour ",
    0x0d34: "Flash Off",
    0x0d44: "Flash",
    0x0d52: "Shift Off",
    0x0d62: "Shift Up",
    0x0d78: "Shift Down",
    0x0d90: "Set Rainbow",
    0x0dae: "Set Rainbow",
    0x0dc2: "Rainbow Del",
    0x0dd4: "Rainbow Del",
    0x0ddc: "Rainbow",
    0x0df0: "Rain",
    0x0dfe: "Fade ",
    0x0e08: "Phybase",
    0x0e16: "Physic",
    0x0e24: "Physic",
    0x0e2c: "Autoback ",
    0x0e3c: "Plot",
    0x0e4a: "Plot",
    0x0e56: "Point",
    0x0e64: "Draw To",
    0x0e74: "Draw",
    0x0e86: "Ellipse",
    0x0e9a: "Circle",
    0x0eac: "Polyline to",
    0x0eba: "Polygon",
    0x0ec8: "Bar",
    0x0ed8: "Box",
    0x0ee8: "Paint",
    0x0ef8: "Paint",
    0x0f04: "Gr Locate",
    0x0f16: "Text Length",
    0x0f28: "Text Style",
    0x0f38: "Text Base",
    0x0f3a: "Text Base",
    0x0f4a: "Text",
    0x0f5a: "Set Text",
    0x0f6a: "Set Paint",
    0x0f7a: "Get Fonts",
    0x0f8a: "Get Disc Fonts",
    0x0f9e: "Get Rom Fonts",
    0x0fb2: "Set Font",
    0x0fc2: "Font",
    0x0fce: "HSlider",
    0x0fe8: "VSlider",
    0x1002: "Set Slider",
    0x1022: "Set Pattern",
    0x1034: "Set Line",
    0x1044: "Ink",
    0x1050: "Ink",
    0x105a: "Ink",
    0x1066: "Gr Writing ",
    0x1078: "Clip",
    0x1084: "Clip",
    0x1092: "Set Tempras",
    0x10a4: "Set Tempras",
    0x10ac: "Set Tempras",
    0x10b6: "Appear",
    0x10c8: "Appear",
    0x10d6: "Zoom",
    0x10f4: "Get Cblock",
    0x110e: "Put Cblock",
    0x1120: "Put Cblock",
    0x112c: "Del Cblock",
    0x113e: "Del Cblock",
    0x1146: "Get Block",
    0x1160: "Get Block",
    0x1172: "Put Block",
    0x1184: "Put Block",
    0x1190: "Put Block",
    0x119e: "Put Block",
    0x11ae: "Del Block",
    0x11be: "Del Block",
    0x11c6: "Key Speed",
    0x11d8: "Key State",
    0x11e8: "Key Shift",
    0x11f8: "Joy",
    0x1202: "Jup",
    0x120c: "Jdown",
    0x1218: "Jleft",
    0x1224: "Jright",
    0x1232: "Fire",
    0x123e: "True",
    0x1248: "False",
    0x1254: "Put Key",
    0x1262: "Scancode",
    0x1270: "Scanshift",
    0x1280: "Clear Key",
    0x1290: "Wait Key",
    0x129e: "Wait ",
    0x12aa: "Key$",
    0x12b6: "Scan$",
    0x12bc: "Scan$",
    0x12c4: "Scan$",
    0x12ce: "Timer",
    0x12da: "Wind Open",
    0x12f4: "Wind Open",
    0x1306: "Wind Open",
    0x131a: "Wind Close",
    0x132a: "Wind Save",
    0x133a: "Wind Move",
    0x134c: "Wind Size",
    0x135e: "Window",
    0x136c: "Windon",
    0x1378: "Locate",
    0x1388: "Clw",
    0x1392: "Home",
    0x139c: "Curs Pen",
    0x13ac: "Pen$",
    0x13b8: "Paper$",
    0x13c6: "At ",
    0x13d2: "Pen ",
    0x13dc: "Paper ",
    0x13e8: "Center",
    0x13f6: "Border",
    0x1408: "Writing",
    0x1418: "Writing",
    0x1422: "Title Top",
    0x1432: "Title Bottom",
    0x1446: "Curs Off",
    0x1454: "Curs On",
    0x1462: "Inverse Off",
    0x1474: "Inverse On",
    0x1484: "Under Off",
    0x1494: "Under On",
    0x14a2: "Shade Off",
    0x14b2: "Shade On",
    0x14c0: "Scroll Off",
    0x14d0: "Scroll On",
    0x14e0: "Scroll",
    0x14ee: "Cup$",
    0x14f8: "CDown$",
    0x1504: "CLeft$",
    0x1510: "CRight$",
    0x151e: "Cup",
    0x1528: "Cdown",
    0x1534: "Cleft",
    0x1540: "Cright",
    0x154c: "Memorize X",
    0x155c: "Memorize Y",
    0x156c: "Cmove$",
    0x157c: "CMove",
    0x158a: "Cline",
    0x1596: "Cline",
    0x159e: "Hscroll",
    0x15ac: "Vscroll",
    0x15ba: "Set Tab",
    0x15c8: "Set Curs",
    0x15e6: "X Curs",
    0x15f2: "Y Curs",
    0x15fe: "X Graphics",
    0x160e: "Y Graphics",
    0x161e: "Xgr",
    0x1628: "Ygr",
    0x1632: "Reserve Zone",
    0x1646: "Reserve Zone",
    0x164e: "Reset Zone",
    0x1660: "Reset Zone",
    0x1668: "Set Zone",
    0x1680: "Zone",
    0x168e: "Zone",
    0x169a: "HZone",
    0x16aa: "Hzone",
    0x16b6: "Scin",
    0x16c4: "Scin",
    0x16d0: "Mouse Screen",
    0x16e2: "Mouse Zone",
    0x16f2: "Set Input",
    0x1704: "Close Workbench",
    0x171a: "Close Editor",
    0x172c: "Dir First",
    0x173e: "Dir Next",
    0x174e: "Exist ",
    0x175a: "Dir$ ",
    0x1766: "Ldir/ w",
    0x1774: "Ldir/ w",
    0x177c: "Dir/w ",
    0x1788: "Dir/w ",
    0x1790: "Ldir ",
    0x179c: "Ldir ",
    0x17a4: "Dir ",
    0x17ae: "Dir ",
    0x17b6: "Set Dir ",
    0x17c4: "Set Dir ",
    0x17d4: "Load Iff ",
    0x17e4: "Load Iff ",
    0x17ee: "Mask Iff ",
    0x17fe: "Picture ",
    0x180c: "Bload ",
    0x181a: "Bsave ",
    0x1820: "Pload ",
    0x182a: "Pload ",
    0x1838: "Save ",
    0x1844: "Save ",
    0x184e: "Load ",
    0x185a: "Load ",
    0x1864: "Dfree",
    0x1870: "Mkdir",
    0x187c: "Lof",
    0x1886: "Eof",
    0x1890: "Pof",
    0x189c: "Port",
    0x18a8: "Open Random",
    0x18bc: "Open In",
    0x18cc: "Open Out",
    0x18de: "Open Port",
    0x18f0: "Append",
    0x1900: "Close",
    0x190c: "Close",
    0x1914: "Parent",
    0x1920: "Rename",
    0x1930: "Kill",
    0x193c: "Drive",
    0x1948: "Field",
    0x1954: "Fsel$",
    0x1962: "Fsel$",
    0x196c: "Fsel$",
    0x1978: "Fsel$",
    0x1986: "Set Sprite Buffer",
    0x199e: "Sprite Off",
    0x19b0: "Sprite Off",
    0x19b8: "Sprite Priority",
    0x19ce: "Sprite Update Off",
    0x19e6: "Sprite Update On",
    0x19fc: "Sprite Update",
    0x1a10: "Spritebob Col",
    0x1a26: "Spritebob Col",
    0x1a32: "Sprite Col",
    0x1a44: "Sprite Col",
    0x1a50: "Set Hardcol",
    0x1a64: "Hardcol",
    0x1a72: "Sprite Base",
    0x1a84: "Icon Base",
    0x1a94: "Sprite",
    0x1aa8: "Bob Off",
    0x1ab6: "Bob Off",
    0x1abe: "Bob Update Off",
    0x1ad2: "Bob Update On",
    0x1ae6: "Bob Update",
    0x1af6: "Bob Clear",
    0x1b06: "Bob Draw",
    0x1b14: "Bobsprite Col",
    0x1b2a: "Bobsprite Col",
    0x1b36: "Bob Col",
    0x1b46: "Bob Col",
    0x1b52: "Col",
    0x1b5c: "Limit Bob",
    0x1b64: "Limit Bob",
    0x1b6c: "Limit Bob",
    0x1b7a: "Limit Bob",
    0x1b8a: "Set Bob",
    0x1b9e: "Bob ",
    0x1bae: "Get Sprite Palette",
    0x1bc8: "Get Sprite Palette",
    0x1bd0: "Get Sprite",
    0x1bea: "Get Sprite",
    0x1bfc: "Get Bob",
    0x1c14: "Get Bob",
    0x1c26: "Del Sprite",
    0x1c38: "Del Sprite",
    0x1c42: "Del Bob",
    0x1c52: "Del Bob",
    0x1c5c: "Del Icon",
    0x1c6c: "Del Icon",
    0x1c76: "Ins Sprite",
    0x1c88: "Ins Bob",
    0x1c96: "Ins Icon",
    0x1ca6: "Get Icon Palette",
    0x1cbe: "Get Icon Palette",
    0x1cc6: "Get Icon",
    0x1cde: "Get Icon",
    0x1cf0: "Put Bob",
    0x1cfe: "Paste Bob",
    0x1d12: "Paste Icon",
    0x1d28: "Make Mask",
    0x1d38: "Make Mask",
    0x1d40: "No Mask",
    0x1d4e: "No Mask",
    0x1d56: "Make Icon Mask",
    0x1d6c: "Make Icon Mask",
    0x1d74: "No Icon Mask",
    0x1d88: "No Icon Mask",
    0x1d90: "Hot Spot",
    0x1da2: "Hot Spot",
    0x1dae: "Priority On",
    0x1dc0: "Priority Off",
    0x1dd2: "Hide On",
    0x1de0: "Hide",
    0x1dea: "Show On",
    0x1df8: "Show",
    0x1e02: "Change Mouse",
    0x1e16: "X Mouse",
    0x1e24: "Y Mouse",
    0x1e32: "Mouse Key ",
    0x1e42: "Mouse Click ",
    0x1e54: "Limit Mouse ",
    0x1e66: "Limit Mouse ",
    0x1e6e: "Limit Mouse ",
    0x1e7c: "Unfreeze ",
    0x1e8a: "Move X",
    0x1e9a: "Move X",
    0x1ea6: "Move Y",
    0x1eb6: "Move y",
    0x1ec2: "Move Off",
    0x1ed2: "Move Off",
    0x1eda: "Move On",
    0x1ee8: "Move On",
    0x1ef0: "Move Freeze",
    0x1f02: "Move Freeze",
    0x1f0a: "Anim Off",
    0x1f1a: "Anim Off",
    0x1f22: "Anim On",
    0x1f30: "Anim On",
    0x1f38: "Anim Freeze",
    0x1f4a: "Anim Freeze",
    0x1f52: "Anim",
    0x1f60: "Anim",
    0x1f6c: "Movon",
    0x1f78: "Chanan",
    0x1f86: "Chanmv",
    0x1f94: "Channel ",
    0x1fa2: "Amreg",
    0x1fb0: "Amreg",
    0x1fbc: "Amal On",
    0x1fca: "Amal On",
    0x1fd2: "Amal Off",
    0x1fe2: "Amal Off",
    0x1fea: "Amal Freeze",
    0x1ffc: "Amal Freeze",
    0x2004: "Amalerr",
    0x2012: "Amal ",
    0x2020: "Amal ",
    0x202c: "Amplay",
    0x203c: "Amplay",
    0x204a: "Synchro On",
    0x205a: "Synchro Off",
    0x206c: "Synchro",
    0x207a: "Update Off",
    0x208a: "Update On",
    0x209a: "Update Every",
    0x20ae: "Update",
    0x20ba: "X Bob",
    0x20c6: "Y Bob",
    0x20d2: "X Sprite",
    0x20e2: "Y Sprite",
    0x20f2: "Reserve As Work ",
    0x210a: "Reserve As Chip Work ",
    0x2128: "Reserve As Data ",
    0x2140: "Reserve As Chip Data ",
    0x215e: "Erase ",
    0x216a: "List Bank",
    0x217a: "Chip Free",
    0x218a: "Fast Free",
    0x219a: "Fill ",
    0x21aa: "Copy ",
    0x21ba: "Hunt ",
    0x21ca: "Poke ",
    0x21d8: "Loke ",
    0x21e6: "Peek ",
    0x21f2: "Deek ",
    0x21fe: "Leek ",
    0x220a: "Bset.<>",
    0x2218: "Bclr ",
    0x2226: "Bchg ",
    0x2234: "Btst ",
    0x2242: "Ror.<>",
    0x2250: "Ror.w",
    0x225e: "Ror.l",
    0x226c: "Rol.<>",
    0x227a: "Rol.w",
    0x2288: "Rol.l",
    0x2296: "Areg",
    0x22a2: "Dreg",
    0x22ae: "Copper On",
    0x22be: "Copper Off",
    0x22ce: "Cop Swap",
    0x22dc: "Cop Reset",
    0x22ec: "Cop Wait",
    0x22fe: "Cop Wait",
    0x230c: "Cop Movel",
    0x231e: "Cop Move",
    0x2330: "Cop Logic",
    0x2340: "Prg First$",
    0x2352: "Prg Next$",
    0x2362: "Psel$",
    0x2370: "Psel$",
    0x237a: "Psel$",
    0x2386: "Psel$",
    0x2394: "Prun",
    0x23a0: "Bgrab",
    0x23ac: "Put",
    0x23b8: "Get",
    0x23c4: "System",
    0x23d0: "Multi Wait",
    0x23e0: "I Bob",
    0x23ec: "I Sprite",
    0x23fc: "Priority Reverse On",
    0x2416: "Priority Reverse Off",
    0x2430: "Dev First",
    0x2442: "Dev Next",
    0x2452: "Hrev Block",
    0x2464: "Vrev Block",
    0x2476: "Hrev",
    0x2482: "Vrev",
    0x248e: "Rev",
    0x2498: "Bank Swap",
    0x24aa: "Amos To Front",
    0x24be: "Amos To Back",
    0x24d0: "Amos Here",
    0x24e0: "Amos Lock",
    0x24f0: "Amos Unlock",
    0x2502: "Display Height",
    0x2516: "Ntsc",
    0x2520: "Laced",
    0x252c: "Prg State",
    0x253c: "Command Line$",
    0x2550: "Disc Info$",
    0xff3e: "Xor ",
    0xff4c: "Or ",
    0xff58: "And ",
    0xff66: "<> ",
    0xff70: ">< ",
    0xff7a: "<= ",
    0xff84: "=< ",
    0xff8e: ">= ",
    0xff98: "=> ",
    0xffa2: "= ",
    0xffac: "< ",
    0xffb6: "> ",
    0xffc0: "+ ",
    0xffca: "- ",
    0xffd4: "Mod ",
    0xffe2: "* ",
    0xffec: "/ ",
    0xfff6: "^ ",
}

# List of need extensions for the source code
extensions = {
    2: "compact"
}

# Known extensions
known_extensions = {
    "compact":
    {
        "file": "Compact.Lib",
        "slot": 2,
        "tokens":
        {
            0x0006: "Pack ",
            0x0026: "Spack ",
            0x0036: "Spack ",
            0x0048: "Unpack ",
            0x0056: "Unpack ",
        }
    },
    "music":
    {
        "file": "Music.Lib",
        "slot": 1,
        "tokens":
        {
            0x0012: "Vumeter",
            0x0020: "Voice",
            0x002c: "Music Stop",
            0x004c: "Tempo",
            0x0058: "Music",
            0x0074: "Boom",
            0x007e: "Shoot",
            0x00f8: "Sam Play",
            0x00de: "Sam Play",
            0x0118: "Bell",
            0X0144: "Play",
            0x0196: "Mvolume",
            0x01a4: "Volume",
            0x01ca: "Led On",
            0x01d6: "Led Off",
            0x01e4: "Say",
            0x01fa: "Set Talk",
            0x0256: "Sam Stop",
            0x025e: "Track Stop",
            0x026e: "Track Loop On",
            0x0282: "Track Loop Off",
            0x0296: "Track Play",
            0x02a8: "Track Play",
            0x02ba: "Track Load",
        }
    },
    "request":
    {
        "file": "Request.Lib",
        "slot": 3,
        "tokens":
        {
            0x0006: "Request On",
            0x0028: "Request Off",
        }
    },
    "amcaf":
    {
        "file": "AMCAF.Lib",
        "slot": 8,
        "tokens":
        {
            0x0012: "amcaf base",
            0x0013: "amcaf version$",
            0x0014: "amcaf length",
            0x0050: "amcaf aga notation on",
            0x0051: "amcaf aga notation off",
            0x0019: "bank permanent",
            0x001a: "bank temporary",
            0x001b: "bank to chip",
            0x001c: "bank to fast",
            0x0022: "bank code xor.b",
            0x0024: "bank code add.b",
            0x0026: "bank code mix.b",
            0x0028: "bank code rol.b",
            0x002a: "bank code ror.b",
            0x002c: "bank code xor.w",
            0x002e: "bank code add.w",
            0x0030: "bank code mix.w",
            0x0032: "bank code rol.w",
            0x0034: "bank code ror.w",
            0x0035: "bank stretch",
            0x0039: "bank copy",
            0x003b: "bank name$",
            0x003a: "bank name",
            0x0037: "bank checksum",
            0x0065: "disk state",
            0x0064: "disk type",
            0x0063: "dos hash",
            0x0060: "filename$",
            0x0066: "pattern match",
            0x00dc: "open workbench",
            0x00cc: "x raster",
            0x00cd: "y raster",
            0x00ce: "raster wait",
            0x00d0: "set ntsc",
            0x00d1: "set pal",
            0x015c: "turbo plot",
            0x015d: "turbo point",
            0x0057: "red val",
            0x0058: "green val",
            0x0059: "blue val",
            0x0061: "path$",
            0x0062: "extpath$",
            0x0114: "rnc unpack",
            0x0115: "rnp",
            0x00d7: "reset computer",
            0x005a: "rrggbb to rgb",
            0x005b: "rgb to rrggbb",
            0x0068: "wload",
            0x0067: "dload",
            0x0069: "wsave",
            0x0069: "dsave",
            0x006c: "file copy",
            0x0015: "nop",
            0x0016: "nfn",
            0x00eb: "pptodisk",
            0x00ed: "ppfromdisk",
            0x00c2: "binexp",
            0x00c3: "binlog",
            0x0085: "extbase",
            0x00ad: "io error$",
            0x00ac: "io error",
            0x0117: "scrn rastport",
            0x0118: "scrn bitmap",
            0x0119: "scrn layerinfo",
            0x011a: "scrn layer",
            0x011b: "scrn region",
            0x008e: "change font",
            0x0091: "font style",
            0x00db: "flush libs",
            0x015e: "fcircle",
            0x015f: "fellipse",
            0x00d8: "cpu",
            0x00d9: "fpu",
            0x00dd: "launch",
            0x006d: "examine dir",
            0x006e: "examine next$",
            0x006f: "examine stop",
            0x0070: "examine object",
            0x0074: "object type",
            0x0076: "object size",
            0x0078: "object blocks",
            0x0072: "object name$",
            0x007a: "object date",
            0x007c: "object time",
            0x007f: "object protection$",
            0x007e: "object protection",
            0x0081: "object comment$",
            0x0083: "set object comment",
            0x00d2: "set sprite priority",
            0x0140: "current date",
            0x0141: "current time",
            0x0142: "cd year",
            0x0143: "cd month",
            0x0144: "cd day",
            0x0145: "cd weekday",
            0x0149: "ct hour",
            0x014a: "ct minute",
            0x014b: "ct second",
            0x014c: "ct tick",
            0x00ae: "mask copy",
            0x0116: "scanstr$",
            0x00b3: "chr.w$",
            0x00b4: "chr.l$",
            0x000b: "pjoy",
            0x000c: "pjleft",
            0x000d: "pjright",
            0x000e: "pjup",
            0x000f: "pjdown",
            0x0010: "pfire",
            0x00c4: "lsl",
            0x00c5: "lsr",
            0x00c6: "wordswap",
            0x0017: "audio lock",
            0x0018: "audio free",
            0x004f: "convert grey",
            0x00b5: "asc.w",
            0x00b6: "asc.l",
            0x0153: "amos task",
            0x0155: "amos cli",
            0x0154: "command name$",
            0x0156: "tool types$",
            0x00a1: "ham colour",
            0x00a2: "ham best",
            0x0056: "glue colour",
            0x010d: "ptile bank",
            0x010e: "paste ptile",
            0x0086: "extdefault",
            0x0087: "extremove",
            0x0088: "extreinit",
            0x0130: "td stars bank",
            0x0131: "td stars limit",
            0x0133: "td stars origin",
            0x0134: "td stars init",
            0x0139: "td stars single do",
            0x013a: "td stars double do",
            0x013b: "td stars single del",
            0x013c: "td stars double del",
            0x013d: "td stars move",
            0x013f: "td stars draw",
            0x0135: "td stars gravity",
            0x0136: "td stars accelerate on",
            0x0137: "td stars accelerate off",
            0x0138: "td stars planes",
            0x00c7: "sdeek",
            0x00c8: "speek",
            0x00e3: "pix shift up",
            0x00e5: "pix shift down",
            0x00e7: "pix brighten",
            0x00e9: "pix darken",
            0x00e1: "make pix mask",
            0x005c: "count pixels",
            0x005d: "coords bank",
            0x005f: "coords read",
            0x0120: "splinters bank",
            0x0123: "splinters limit",
            0x0125: "splinters gravity",
            0x0127: "splinters init",
            0x0126: "splinters colour",
            0x0128: "splinters single do",
            0x0129: "splinters double do",
            0x012a: "splinters single del",
            0x012b: "splinters double del",
            0x012c: "splinters move",
            0x012e: "splinters draw",
            0x0121: "splinters max",
            0x012d: "splinters back",
            0x0089: "imploder unpack",
            0x008a: "imploder load",
            0x00b1: "lzstr$",
            0x00b2: "lsstr$",
            0x00d6: "write cli",
            0x0054: "mix colour",
            0x0148: "cd date$",
            0x014d: "ct time$",
            0x0122: "splinters fuel",
            0x012f: "splinters active",
            0x011c: "shade bob mask",
            0x011d: "shade bob planes",
            0x011e: "shade bob up",
            0x011f: "shade bob down",
            0x00a3: "ham fade out",
            0x001e: "bank delta encode",
            0x0020: "bank delta decode",
            0x015a: "turbo draw",
            0x004a: "blitter fill",
            0x0108: "pt play",
            0x010b: "pt stop",
            0x010c: "pt signal",
            0x0105: "pt volume",
            0x0106: "pt voice",
            0x0104: "pt vu",
            0x0103: "pt cia speed",
            0x0112: "qsin",
            0x0111: "qcos",
            0x0002: "vec rot pos",
            0x0003: "vec rot angles",
            0x0004: "vec rot precalc",
            0x0006: "vec rot x",
            0x0008: "vec rot y",
            0x008d: "change print font",
            0x0110: "qrnd",
            0x000a: "vec rot z",
            0x00d3: "cop pos",
            0x008b: "make bank font",
            0x008c: "change bank font",
            0x0046: "blitter clear",
            0x0044: "blitter busy",
            0x0045: "blitter wait",
            0x00df: "shade pix",
            0x003c: "blitter copy limit",
            0x003e: "blitter copy",
            0x00c9: "set rain colour",
            0x00ca: "rain fade",
            0x010f: "qsqr",
            0x0161: "bcircle",
            0x00fd: "pt data base",
            0x0101: "pt instr address",
            0x0102: "pt instr length",
            0x0107: "pt bank",
            0x00fe: "pt instr play",
            0x00f7: "pt sam stop",
            0x00f8: "pt raw play",
            0x00f9: "pt sam bank",
            0x00fa: "pt sam play",
            0x00f4: "pt sam volume",
            0x014f: "pal get screen",
            0x0150: "pal set screen",
            0x0151: "pal get",
            0x0152: "pal set",
            0x00d4: "exchange bob",
            0x00d5: "exchange icon",
            0x0052: "best pen",
            0x0160: "bzoom",
            0x00a4: "x smouse",
            0x00a5: "y smouse",
            0x00a6: "smouse x",
            0x00a7: "smouse y",
            0x00aa: "smouse speed",
            0x00ab: "smouse key",
            0x00a8: "limit smouse",
            0x0011: "xfire",
            0x010a: "pt continue",
            0x00f0: "pt cpattern",
            0x00f1: "pt cpos",
            0x00f2: "pt cinstr",
            0x00f3: "pt cnote",
            0x00f6: "pt sam freq",
            0x00b7: "vclip",
            0x00b8: "vin",
            0x00b9: "vmod",
            0x00bb: "insstr$",
            0x00bc: "cutstr$",
            0x00bd: "replacestr$",
            0x00be: "itemstr$",
            0x0113: "qarc",
            0x00c1: "even",
            0x00c0: "odd",
            0x00a0: "ham point",
            0x0084: "set object date",
            0x00da: "aga detect",
            0x014e: "pal spread",
            0x0146: "ct string",
            0x0147: "cd string",
            0x004e: "c2p convert",
            0x004d: "c2p shift",
            0x004c: "c2p fire",
            0x006a: "sload",
            0x006b: "ssave",
            0x00ee: "pt free voice",
            0x0092: "alloc trans source",
            0x0093: "set trans source",
            0x0094: "alloc trans map",
            0x0095: "set trans map",
            0x0096: "alloc code bank",
            0x0098: "trans screen runtime",
            0x009a: "trans screen static",
            0x0099: "trans screen dynamic",
            0x0157: "turbo text",
        }
    },
    "compiler":
    {
        "file": "Compiler.Lib",
        "slot": 5,
        "tokens":
        {
            0x0028: "Comp Test On",
            0x003a: "Comp Test Off"
        }
    },
    "misc":
    {
        "file": "Misc.Lib",
        "slot": 23,
        "tokens":
        {
            0x0007: "dled on",
            0x0008: "dled off",
            0x0004: "display on",
            0x0003: "display off",
            0x0005: "multi off",
            0x0006: "multi on",
            0x0009: "mouse off",
            0x000a: "reset",
            0x000b: "clear ram",
            0x000d: "disk wait",
            0x000e: "pal on",
            0x000c: "firewait",
        }
    },
}
